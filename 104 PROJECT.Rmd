---
title: "Econ 104 Course Project"
author: "Valeria Meza, Brianna P, Sara"
date: "2026-02-11"
output: html_document:
  toc: true
    toc_float: true
    number_sections: true
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, warning = FALSE, message = FALSE)

library(tidyverse)
library(Boruta)
library(car)
library(lmtest)
library(sandwich)
library(tseries)
library(boot)
library(caret)

set.seed(123) 
```
```{r load-data}
df <- read_csv("data/msa_housing_final.csv")
# Sanity checks
nrow(df)
glimpse(df) 
```
```{r define-vars}
# Outcome variable
y_var <- "med_home_value"

# Quantitative predictors for Boruta (NOW 10)
quant_vars <- c(
  "med_income",
  "log_income",
  "population",
  "log_population",
  "unemployment_rate",
  "employment_rate",   
  "med_age",
  "age_squared",
  "vacancy_rate",
  "college_share")

cat("Missing variables:", setdiff(c(y_var, quant_vars), names(df)), "\n")




## Introduction

## 1. Economic Theory and Hypothesis
### (a) Research Question
### (b) Economic Theory
### (c) Hypotheses
### (d) Expected Signs

## 2. Variable Selection
### (a) Boruta (Quantitative only)
```
```{r boruta, message=FALSE, warning=FALSE}
cat("START BORUTA CHUNK\n")
flush.console()
  
boruta_df <- df %>%
  select(all_of(c(y_var, quant_vars))) %>%
  drop_na()

X <- boruta_df %>% select(all_of(quant_vars))
y <- boruta_df[[y_var]]

set.seed(123)
boruta_fit <- Boruta(x = X, y = y, doTrace = 2, maxRuns = 500)

boruta_fixed <- TentativeRoughFix(boruta_fit)

confirmed <- getSelectedAttributes(boruta_fixed, withTentative = FALSE)
confirmed

plot(boruta_fixed, las = 2, cex.axis = 0.7) 


### (b) Factor/indicator variables
### (c) Final predictor set

## 3. Descriptive Analysis and EDA

## 4. Model Building and Selection

## 5. Diagnostics and Robustness

## 6. Results and Economic Interpretation

## 7. Limitations and Extensions

## 8. Code Quality and Reproducibility





